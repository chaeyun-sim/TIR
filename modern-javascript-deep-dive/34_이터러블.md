# 34. ì´í„°ëŸ¬ë¸”

- 2024.8.2

## ğŸ· ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œ

```
- ìˆœíšŒ ê°€ëŠ¥í•œ ë°ì´í„° ì»¬ë ‰ì…˜ì„ ë§Œë“¤ê¸° ìœ„í•´ ECMAScript ì‚¬ì–‘ì— ì •ì˜ë˜ì–´ìˆëŠ” ê·œì¹™
- ì´í„°ëŸ¬ë¸”: ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ê°ì²´, for..ofë¬¸ìœ¼ë¡œ ìˆœíšŒ, ìŠ¤í”„ë ˆë“œ ë¬¸ë²•ê³¼ ë°°ì—´ ë””ìŠ¤íŠ¸ëŸ­ì²˜ë§ ì‚¬ìš© ê°€ëŠ¥
- ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œ: Symbol.iteratorë¥¼ í”„ë¡œí¼í‹° í‚¤ë¡œ ì‚¬ìš©í•œ ë©”ì„œë“œ ì§ì ‘ êµ¬í˜„ ë˜ëŠ” í”„ë¡œí† íƒ€ì… ì²´ì¸ì„ í†µí•´ ìƒì† ë°›ì€ Symbol.iterator ë©”ì„œë“œ í˜¸ì¶œ => ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ì´í„°ë ˆì´í„° ë°˜í™˜
- ì´í„°ë ˆì´í„°: ì´í„°ë ˆì´í„° í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ê°ì²´, next ë©”ì„œë“œ ì†Œìœ , valueì™€ done ê°ì²´ë¥¼ ê°–ëŠ” ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ ë°˜í™˜
```

### 1.1 ì´í„°ëŸ¬ë¸”

> ì´í„°ëŸ¬ë¸” í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•œ ê°ì²´

```jsx
const isIterable = v => v !== null && typeof v[Symbol.iterator] === 'function';

isIterable([]); // true
isIterable({}); // false
```

```
- ì˜ˆ) ë°°ì—´ => Array.prototypeê³¼ Symbol.iterator ë©”ì„œë“œë¥¼ ìƒì†ë°›ëŠ” ì´í„°ëŸ¬ë¸”
```

### 1.2 ì´í„°ë ˆì´í„°

```
- ì´í„°ëŸ¬ë¸”ì˜ Symbol.iterator ë©”ì„œë“œê°€ ë°˜í™˜í•œ ì´í„°ë ˆì´í„° => next ë©”ì„œë“œ í¬í•¨
- next ë©”ì„œë“œ: ì´í„°ëŸ¬ë¸”ì˜ ê° ìš”ì†Œ ìˆœíšŒ, Iterator Result Object ë°˜í™˜
- done í”„ë¡œí¼í‹°: ì´í„°ëŸ¬ë¸”ì˜ ìˆœíšŒ ì™„ë£Œ ì—¬ë¶€ í‘œì‹œ
```

```jsx
const array = [1, 2, 3];

const iterator = array[Symbol.iterator]();

console.log(iterator.next()); // {value: 1, done: false}
console.log(iterator.next()); // {value: 2, done: false}
console.log(iterator.next()); // {value: 3, done: false}
console.log(iterator.next()); // {value: undefined, done: true}
```

<br />

## ğŸ· ë¹ŒíŠ¸ì¸ ì´í„°ëŸ¬ë¸”

| ë¹ŒíŠ¸ì¸ ì´í„°ëŸ¬ë¸” | Symbol.iterator ë©”ì„œë“œ |
| --- | --- |
| Array | Array.prototype[Symbol.iterator] |
| String | String.prototype[Symbol.iterator] |
| Map | Map.prototype[Symbol.iterator] |
| Set | Set.prototype[Symbol.iterator] |
| TypedArray | TypedArray.prototype[Symbol.iterator] |
| arguments | arguments[Symbol.iterator] |
| DOM ì»¬ë ‰ì…˜ | NodeList.prototype[Symbol.iterator]<br />HTMLCollection.prototype[Symbol.iterator] |

<br />

## ğŸ· for...ofë¬¸

```jsx
for (const item of [1, 2, 3]) {
  console.log(item); // 1 2 3
}
```

```
- ì´í„°ëŸ¬ë¸”ì˜ ìš”ì†Œë¥¼ ë³€ìˆ˜ì— í• ë‹¹
- ë¬¸ë²•: for (ë³€ìˆ˜ì„ ì–¸ë¬¸ of ì´í„°ëŸ¬ë¸”) { ... }
- í”„ë¡œí† íƒ€ì… ì²´ì¸ ìƒ ì¡´ì¬í•˜ëŠ” ëª¨ë“  í”„ë¡œí† íƒ€ì… í”„ë¡œí¼í‹° ì¤‘ [[Enumerable]]ì´ trueì¸ í”„ë¡œí¼í‹°ë¥¼ ìˆœíšŒí•˜ë©° ì—´ê±° (ì‹¬ë²Œ ì œì™¸)
- next ë©”ì„œë“œ í˜¸ì¶œ => ì´í„°ë ˆì´í„° ë¦¬ì ˆíŠ¸ ê°ì²´ì˜ valeu í”„ë¡œí¼í‹° ê°’ì„ forë¬¸ ë³€ìˆ˜ì— í• ë‹¹ => done í”„ë¡œí¼í‹° ê°’ì´ falseë¼ë©´ ìˆœíšŒ ì§€ì† => trueë¼ë©´ ìˆœíšŒ ì¤‘ë‹¨
```

<br />

## ğŸ· ì´í„°ëŸ¬ë¸”ê³¼ ìœ ì‚¬ ë°°ì—´ ê°ì²´

```
- ìœ ì‚¬ ë°°ì—´ ê°ì²´: ë§ˆì¹˜ ë°°ì—´ì²˜ëŸ¼ ì¸ë±ìŠ¤ë¡œ í”„ë¡œí¼í‹° ê°’ì— ì ‘ê·¼ ê°€ëŠ¥, length í”„ë¡œí¼í‹°ë¥¼ ê°€ì§, forë¬¸ìœ¼ë¡œ ìˆœíšŒ ê°€ëŠ¥, ì¸ë±ì‹± ê°€ëŠ¥
- ìœ ì‚¬ ë°°ì—´ ê°ì²´ëŠ” ì¼ë°˜ ê°ì²´ì´ê¸° ë•Œë¬¸ì— Symbol.iterator ë©”ì„œë“œ ì—†ìŒ => forë¬¸ìœ¼ë¡œ ìˆœíšŒ ë¶ˆê°€
- ì´ë•Œ Array.from ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë°°ì—´ë¡œ ê°„ë‹¨íˆ ë³€í™˜ ê°€ëŠ¥
```

```jsx
const arrayLike = {
  0: 1,
  1: 2,
  2: 3,
  length: 3,
};

const arr = Array.from(arrayLike);
```

<br />

## ğŸ· ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì˜ í•„ìš”ì„±

```
- ë°ì´í„° ì†Œë¹„ìì™€ ê³µê¸‰ìë¥¼ ì—°ê²°í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ ì—­í• 
- ì´í„°ëŸ¬ë¸”ì€ for...ofë¬¸, ìŠ¤í”„ë ˆë“œ ë¬¸ë²•, ë°°ì—´ ë””ìŠ¤íŠ¸ëŸ­ì²˜ë§ í• ë‹¹ê³¼ ê°™ì€ ë°ì´í„° "ê³µê¸‰ì"ì˜ ì—­í• ì„ í•¨
```

<img src="../images/iterable.png" />

<br />

## ğŸ· ì‚¬ìš©ì ì •ì˜ ì´í„°ëŸ¬ë¸”

### 6.1 ì‚¬ìš©ì ì •ì˜ ì´í„°ëŸ¬ë¸” êµ¬í˜„

```jsx
const fibonacci = {
  [Symbol.iterator]() {
    let [pre, cur] = [0, 1];
    const max = 10;

    return {
      next() {
        [pre, cur] = [cur, pre + cur];
        return { value: cur, done: cur >= max };
      },
    };
  },
};
```

```
- ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì€ ì¼ë°˜ ê°ì²´ë„ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ë„ë¡ êµ¬í˜„í•˜ë©´ "ì‚¬ìš©ì ì •ì˜ ì´í„°ëŸ¬ë¸”"ì´ ë¨
- ì‚¬ìš©ì ì •ì˜ ì´í„°ëŸ¬ë¸”: ì´í„°ë ˆì´ì…˜ í”„ë¡œí† ì½œì„ ì¤€ìˆ˜í•˜ë„ë¡ Symbol.iterator ë©”ì„œë“œ êµ¬í˜„í•˜ì—¬ next ë©”ì„œë“œë¥¼ ê°€ì§€ëŠ” ì´í„°ë ˆì´í„° ë°˜í™˜í•˜ë„ë¡ í•¨
```

### 6.2 ì´í„°ëŸ¬ë¸”ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜

```jsx
const fibonacciFunc = function (max) {
  let [pre, cur] = [0, 1];
  return {
    [Symbol.iterator]() {
      return {
        next() {
          [pre, cur] = [cur, pre + cur];
          return { value: cur, done: cur >= max };
        },
      };
    },
  };
};
```

### 6.3 ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ì´í„°ë ˆì´í„°ì¸ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜

```jsx
// Symbol.iteratorì™€ next ë©”ì„œë“œë¥¼ ì†Œìœ í•œ ì´í„°ëŸ¬ë¸”ì´ë©´ì„œ ì´í„°ë ˆì´í„°

{
	[Symbol.iterator]() { return this; },
	next() {
		return { value: any, done: boolean }
	}
}
```

### 6.4 ë¬´í•œ ì´í„°ëŸ¬ë¸”ê³¼ ì§€ì—° í‰ê°€

```
- ì§€ì—° í‰ê°€: ë°ì´í„°ê°€ í•„ìš”í•œ ì‹œì ì´ ë˜ë©´ ìƒì„±í•˜ëŠ” ê¸°ë²•
- ì¥ì : ë¶ˆí•„ìš”í•œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ìƒì„±í•˜ì§€ ì•ŠìŒ, í•„ìš”í•œ ìˆœê°„ì— ë°ì´í„° ìƒì„±, ë¹ ë¥¸ ì‹¤í–‰ ì†ë„ ê¸°ëŒ€, ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ ì†Œë¹„í•˜ì§€ ì•ŠìŒ, ë¬´í•œë„ í‘œí˜„ ê°€ëŠ¥
```
